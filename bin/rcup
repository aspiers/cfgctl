#!/bin/bash

set -e

normalize-bookmarks
cd

if [ -z "$*" ]; then
  rcs="`list-cvs-files rcs | sed 's/^rcs\///'` `list-checked-out-dirs -t`"
else
  rcs="$@"
fi

# Don't update the config dirs of running browsers
for browser in netscape galeon; do
  if ps -uxww | grep -v grep | grep -q $browser; then
    echo "$browser is running; not updating ~/.$browser"
    rcs="`echo $rcs | sed -e s/\\.$browser\\ //`"
  fi
done

cvsuhq $rcs
