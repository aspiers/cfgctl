#!/usr/bin/env perl

# For comparing my repository with checked out bits,
# see also list-checked-out-dirs

use strict;
use warnings;

use File::Find;
use FindBin;

require "$FindBin::Bin/on-cvs-host.pl";

my $cvsroot = $ARGV[0] || ".CVSROOT";
my @dirs = ();
find(\&wanted, $cvsroot);

foreach my $dir (sort @dirs) {
  print "$dir\n";
}
  
sub wanted {
  return unless -d;
  my $path = $File::Find::name;
  $path =~ s!^\Q$cvsroot\E/?!!;
  return if $path =~ /Attic$/;

  $path =~ s!^(((X|mutt)_)?rcs|audio)/?!!;

  return unless $path;
  push @dirs, $path;
}
