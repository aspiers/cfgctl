#!/usr/bin/perl -w

# For comparing my repository with checked out bits,
# see also list-checked-out-dirs

use strict;
use File::Find;

my $cvsroot = $ARGV[0] || "$ENV{HOME}/.CVSROOT";
my @dirs = ();
find(\&wanted, $cvsroot);

foreach my $dir (sort @dirs) {
  print "$dir\n";
}
  
sub wanted {
  return unless -d;
  my $path = $File::Find::name;
  $path =~ s!^\Q$cvsroot\E/?!!;
  return if $path =~ /Attic$/;

  $path =~ s!^((X|mutt)_)?rcs/?!!;

  return unless $path;
  push @dirs, $path;
}
